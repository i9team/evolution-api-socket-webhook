# ============================================
# EVOLUTION API - CONFIGURAÇÕES GLOBAIS
# ============================================
EVOLUTION_API_URL=https://sua-evolution-api.com
EVOLUTION_API_KEY=sua_api_key_aqui

# ============================================
# CONFIGURAÇÃO DE INSTÂNCIAS
# ============================================
# Formato: INSTANCE_<NUMERO>_NAME, INSTANCE_<NUMERO>_WEBHOOKS, INSTANCE_<NUMERO>_EVENTS
# Você pode adicionar quantas instâncias quiser (1, 2, 3, 4, 5...)

# Instância 1 - Exemplo: Desenvolvimento (Recebe TODOS os eventos)
INSTANCE_1_NAME=dev
INSTANCE_1_WEBHOOKS=https://webhook.site/seu-id-dev,https://seu-n8n.com/webhook/dev
# INSTANCE_1_EVENTS=  # Deixe vazio ou comente para receber TODOS os eventos

# Instância 2 - Exemplo: Produção (Recebe APENAS novas mensagens)
INSTANCE_2_NAME=producao
INSTANCE_2_WEBHOOKS=https://webhook.site/seu-id-prod,https://seu-n8n.com/webhook/producao
INSTANCE_2_EVENTS=messages.upsert

# Instância 3 - Exemplo: Teste (Recebe mensagens e status de conexão)
INSTANCE_3_NAME=teste
INSTANCE_3_WEBHOOKS=https://webhook.site/seu-id-teste
INSTANCE_3_EVENTS=messages.upsert,messages.update,connection.update

# Instância 4 - Exemplo: Monitor de Grupos (desabilitado por padrão)
# INSTANCE_4_NAME=grupos
# INSTANCE_4_WEBHOOKS=https://webhook.site/seu-id-grupos
# INSTANCE_4_EVENTS=groups.upsert,group.participants.update

# Instância 5 - Exemplo: Backup Completo (desabilitado por padrão)
# INSTANCE_5_NAME=backup
# INSTANCE_5_WEBHOOKS=https://backup.seusite.com/webhook
# INSTANCE_5_EVENTS=  # Sem filtro = recebe todos os eventos

# ============================================
# WEBHOOKS GLOBAIS (OPCIONAL)
# ============================================
# Todas as instâncias enviarão para estas URLs também
# Útil para monitoramento centralizado ou backup
# GLOBAL_WEBHOOKS=https://webhook.site/global,https://monitor.seusite.com/events

# ============================================
# CONFIGURAÇÕES DO SERVIDOR
# ============================================
PORT=3000

# ============================================
# CONFIGURAÇÕES DE LOG
# ============================================

# Nível de log: silent, error, warn, info, debug, verbose
# silent = sem logs
# error = apenas erros
# warn = avisos e erros
# info = informações gerais (RECOMENDADO)
# debug = informações detalhadas para debugging
# verbose = tudo, incluindo payloads completos
LOG_LEVEL=info

# Habilitar/desabilitar tipos específicos de logs
LOG_CONNECTION=true          # Logs de conexão/desconexão WebSocket
LOG_EVENTS=true              # Logs de eventos recebidos do WhatsApp
LOG_FORWARDS=true            # Logs de encaminhamento para webhooks
LOG_ERRORS=true              # Logs de erros
LOG_STATS=true               # Logs de estatísticas periódicas
LOG_RETRY=true               # Logs de tentativas de reenvio

# Mostrar payload completo dos eventos (apenas em modo verbose)
LOG_PAYLOAD=false

# Cores nos logs (true/false)
# Recomendado: true para desenvolvimento local, false para Docker/produção
LOG_COLORS=true

# Timestamp nos logs (true/false)
LOG_TIMESTAMP=true

# Mostrar nome da instância em cada log (true/false)
LOG_INSTANCE_NAME=true

# Salvar logs em arquivo (true/false)
LOG_TO_FILE=false
LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_SIZE=10485760   # 10MB em bytes
LOG_FILE_ROTATE=true

# Intervalo de exibição de estatísticas (em minutos, 0 para desabilitar)
LOG_STATS_INTERVAL=5

# ============================================
# CONFIGURAÇÕES DE WEBHOOK
# ============================================

# Número de tentativas em caso de falha
RETRY_ATTEMPTS=3

# Delay entre tentativas (em milissegundos)
RETRY_DELAY=1000

# Timeout para requisições (em milissegundos)
TIMEOUT=10000

# ============================================
# RECURSOS ADICIONAIS
# ============================================

# Adicionar prefixo "evolution-{instance}" no payload
ADD_INSTANCE_PREFIX=true

# ============================================
# EVENTOS DISPONÍVEIS PARA FILTRO
# ============================================
# Use estes valores em INSTANCE_X_EVENTS (separados por vírgula)
#
# Mensagens:
#   messages.upsert        - Nova mensagem recebida/enviada
#   messages.update        - Mensagem atualizada (lida, entregue, erro)
#   messages.delete        - Mensagem deletada
#   messages.edited        - Mensagem editada
#
# Conexão:
#   connection.update      - Status da conexão (conectado, desconectado, reconectando)
#   qrcode.updated        - QR Code atualizado (quando precisa escanear)
#
# Contatos:
#   contacts.upsert       - Novo contato adicionado
#   contacts.update       - Contato atualizado
#
# Conversas:
#   chats.upsert          - Nova conversa criada
#   chats.update          - Conversa atualizada
#   chats.delete          - Conversa deletada
#
# Grupos:
#   groups.upsert         - Novo grupo criado/adicionado
#   group.participants.update  - Participantes do grupo atualizados
#
# Outros:
#   presence.update       - Status de presença (online, offline, digitando)
#   call                  - Chamada de voz/vídeo recebida
#
# Exemplos de uso:
# INSTANCE_1_EVENTS=messages.upsert
# INSTANCE_2_EVENTS=messages.upsert,messages.update
# INSTANCE_3_EVENTS=messages.upsert,messages.update,connection.update,qrcode.updated